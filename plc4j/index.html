

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
 Generated by Apache Maven Doxia
 Rendered using Reflow Maven Skin 1.5.0 (http://devacfr.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">
          
        <head>
    <meta charset="UTF-8" />
    <title>Apache PLC4X® - About PLC4J</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="" />
      <meta http-equiv="content-language" content="en" />
                                                                <link href="../css/bootstrap.min.css" rel="stylesheet" />
                <link href="../css/docs.css" rel="stylesheet" />
    <link href="../css/reflow-skin.css" rel="stylesheet" />

    <link rel="stylesheet" href="../js/styles/default.min.css" />

    <link href="../css/lightbox.css" rel="stylesheet" />
    <link href="../css/site.css" rel="stylesheet" />
    <link href="../css/print.css" rel="stylesheet" media="print" />
<script>
          document.addEventListener("DOMContentLoaded", function(event) {
            /* Add an image for promoting Apache events below the right banner */
            $("#bannerRight").append('<p id="apacheEvents"><a href="//www.apache.org/events/current-event.html"><img src="//www.apache.org/events/current-event-234x60.png"/></a></p>');
            /* Append the trademarks info to the copyright section */
            $(".copyright").append('<p>Apache PLC4X, PLC4X, Apache, the Apache feather logo, and the Apache PLC4X project logo are either registered trademarks or trademarks of The Apache Software Foundation in the United States and other countries. All other marks mentioned may be trademarks or registered trademarks of their respective owners.</p>');
          });
        </script>
        </head> <!-- end : head -->
    <body class="page-index project-plc4j">

    <div id="m-top-navbar" class="navbar  navbar-default navbar-fixed-top">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                        data-target="#top-navbar-collapse-1" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    </button>
                        <a class="navbar-brand" href="..">Apache PLC4X</a>
        </div> <!-- .navbar-header -->
        <div class="collapse navbar-collapse" id="top-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                            <li class="dropdown active">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reports <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li class="dropdown-submenu ">
<a  href="project-info.html"  title="Project Information" >Project Information</a>                    <ul class="dropdown-menu">
                        <li ><a  href="dependencies.html"  title="Dependencies" >Dependencies</a></li>
                        <li ><a  href="dependency-info.html"  title="Dependency Information" >Dependency Information</a></li>
                        <li ><a  href="dependency-management.html"  title="Dependency Management" >Dependency Management</a></li>
                        <li ><a  href="distribution-management.html"  title="Distribution Management" >Distribution Management</a></li>
                                        <li  class="active" ><a  href=""  title="About" >About</a></li>
                        <li ><a  href="issue-management.html"  title="Issue Management" >Issue Management</a></li>
                        <li ><a  href="licenses.html"  title="Licenses" >Licenses</a></li>
                        <li ><a  href="mailing-lists.html"  title="Mailing Lists" >Mailing Lists</a></li>
                        <li ><a  href="modules.html"  title="Project Modules" >Project Modules</a></li>
                        <li ><a  href="plugin-management.html"  title="Plugin Management" >Plugin Management</a></li>
                        <li ><a  href="plugins.html"  title="Plugins" >Plugins</a></li>
                        <li ><a  href="scm.html"  title="Source Code Management" >Source Code Management</a></li>
                        <li ><a  href="summary.html"  title="Summary" >Summary</a></li>
                    </ul>
                </li>
            </ul>
        </li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Apache <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li ><a  href="http://www.apache.org"  title="Apache Software Foundation"  class="externalLink" >Apache Software Foundation</a></li>
                    <li ><a  href="https://www.apache.org/foundation/how-it-works.html"  title="How Apache Works"  class="externalLink" >How Apache Works</a></li>
                    <li ><a  href="http://www.apache.org/licenses"  title="License"  class="externalLink" >License</a></li>
                    <li ><a  href="http://www.apache.org/foundation/sponsorship.html"  title="Sponsoring Apache"  class="externalLink" >Sponsoring Apache</a></li>
                    <li ><a  href="http://www.apache.org/foundation/thanks.html"  title="Thanks"  class="externalLink" >Thanks</a></li>
            </ul>
        </li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li ><a  href="plc4j-api/index.html"  title="PLC4J: API" >PLC4J: API</a></li>
                    <li ><a  href="plc4j-build-utils/index.html"  title="PLC4J: Build Utils" >PLC4J: Build Utils</a></li>
                    <li ><a  href="plc4j-drivers/index.html"  title="PLC4J: Drivers" >PLC4J: Drivers</a></li>
                    <li ><a  href="plc4j-protocols/index.html"  title="PLC4J: Protocols" >PLC4J: Protocols</a></li>
                    <li ><a  href="plc4j-utils/index.html"  title="PLC4J: Utils" >PLC4J: Utils</a></li>
                    <li ><a  href="plc4j-examples/index.html"  title="PLC4J: Examples" >PLC4J: Examples</a></li>
                    <li ><a  href="plc4j-integrations/index.html"  title="PLC4J: Integrations" >PLC4J: Integrations</a></li>
            </ul>
        </li>
            </ul>
        </div><!--/.nav-collapse -->
      </div> <!--/.container -->
    </div> <!--/.navbar -->
  <div class="container">
  <!-- Masthead -->
  <!-- ================================================== -->  <div class="header container-fluid">
  <div class="jumbotron subhead">
    <div class="row" id="banner">
      <div class="col-md-12">
        <div class="pull-left">
                                      <a href="https://plc4x.apache.org/" id="bannerLeft">
                    <img src="https://plc4x.apache.org/images/apache_plc4x_logo.png"
                 alt='"'Apache PLC4X'"'
 />            </a>
                    <p class="lead">The industrial IoT adapter</p>
        </div>
        <div class="pull-right">
                                      <a href="http://www.apache.org/" id="bannerRight">
                    <img src="https://plc4x.apache.org/images/apache_logo.png"
                 alt='"'Apache Software Foundation'"'
 />            </a>
        </div>
      </div>
    </div>
  </div>
    <hr class="toc-separator" />
    <div id="toc-bar" class="navbar navbar-default">
      <div id="toc-scroll-target" class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#toc-nav-collapse" aria-expanded="false">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
            </div> <!-- .navbar-header -->
        <div class="collapse navbar-collapse" id="toc-nav-collapse">
          <ul id="toc" class="nav navbar-nav">
                                                            <li class="toplevel"><a href="#_toc_about_plc4j1" title="About PLC4J">About PLC4J</a></li>
                        <li class="toplevel"><a href="#_toc_usage1" title="Usage">Usage</a></li>
          </ul>
        </div>
      </div> <!-- .container -->
    </div> <!-- end: toc-bar -->
  </div> <!-- end : header -->
  <div class="main-body">

  <div class="row">
    <div class="col-md-12">
      <div class="body-content">
<div class="sect1"> 
 <div class="page-header">
  <h2 id="_toc_about_plc4j1">About PLC4J</h2>
 </div> 
 <div class="sectionbody"> 
  <div class="paragraph"> 
   <p><code>PLC4J</code> is a sub-project of <code>PLC4X</code> with implementations based on <code>Java</code> targeted at runtimes for <code>Java 1.8</code> or above.</p> 
  </div> 
  <div class="paragraph"> 
   <p>One of PLC4X’s core principals is, that an application using PLC4X should be independent of the PLC or protocol being used.</p> 
  </div> 
  <div class="paragraph"> 
   <p>When addressing a resource on a remote there are two parts that are dependent on the protocol and the type of PLC:</p> 
  </div> 
  <div class="ulist"> 
   <ul> 
    <li> <p>Addressing the PLC itself</p> </li> 
    <li> <p>Addressing a resource on the PLC</p> </li> 
   </ul> 
  </div> 
  <div class="paragraph"> 
   <p>Providing this independence to addressing the PLC itself is completely handled by the <code>PlcDriverManager</code> the application requests a connection from.</p> 
  </div> 
  <div class="paragraph"> 
   <p>Hereby the design of the <code>url string</code> passed to the <code>getConnection</code> method is greatly inspired by <code>JDBC</code>.</p> 
  </div> 
  <div class="paragraph"> 
   <p>The protocol prefix of the url specifies the type of driver being used.</p> 
  </div> 
  <div class="paragraph"> 
   <p>For example, when connecting to a Siemens PLC using the S7/Step7 Protocol, the url: <code>s7://192.42.0.98/1/2</code> causes the driver manager to create a S7 connection instance. The part behind the <code>:</code> is hereby used by the driver implementation to configure that particular connection.</p> 
  </div> 
  <div class="paragraph"> 
   <p>For a S7 connection, for example, this is <code>IP address/host name</code>/<code>rack number</code>/<code>slot number</code>. For different types of connections this url structure will greatly differ.</p> 
  </div> 
  <div class="paragraph"> 
   <p>As mentioned above, the second platform dependent information is the address of resources on a PLC. The format of an address greatly depends on the type of connection. Therefore <code>parseAddress</code> is one of the only methods defined in the <code>PlcConnection</code> interface any connection has to implement.</p> 
  </div> 
  <div class="paragraph"> 
   <p>This method returns an object implementing the <code>Address</code> interface which then can be used by the same connection to identify remote resources.</p> 
  </div> 
  <div class="imageblock"> 
   <div class="content"> 
    <img src="images/plc4x-architecture.png" alt="plc4x architecture" width="1000" height="574" class="img-responsive"> 
   </div> 
  </div> 
  <div class="sect2"> 
   <h3 id="_toc_usage1">Usage</h3> 
   <div class="paragraph"> 
    <p>Below code example connects to a remote Siemens S7 PLC using the S7/Step7 protocol and then reads the state of the <code>inputs</code> and <code>outputs</code> from this.</p> 
   </div> 
   <div class="paragraph"> 
    <p>It also demonstrates two ways this information can be accessed:</p> 
   </div> 
   <div class="ulist"> 
    <ul> 
     <li> <p>Synchronously (The application pauses, till the response is received)</p> </li> 
     <li> <p>Asynchronously (The application continues and can</p> </li> 
    </ul> 
   </div> 
   <div class="listingblock"> 
    <div class="content"> 
     <pre class="prettyprint highlight"><code data-lang="java">package org.apache.plc4x.java.examples.helloplc4x;

import org.apache.plc4x.java.PlcDriverManager;
import org.apache.plc4x.java.api.PlcConnection;
import org.apache.plc4x.java.api.messages.PlcReadRequest;
import org.apache.plc4x.java.api.messages.PlcReadResponse;
import org.apache.plc4x.java.api.types.PlcResponseCode;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import java.util.concurrent.CompletableFuture;

public class HelloPlc4x {

    private static final Logger logger = LoggerFactory.getLogger(HelloPlc4x.class);

    /**
     * Example code do demonstrate using PLC4X.
     *
     * @param args ignored.
     */
    public static void main(String[] args) throws Exception {
        CliOptions options = CliOptions.fromArgs(args);
        if (options == null) {
            CliOptions.printHelp();
            // Could not parse.
            System.exit(1);
        }

        // Establish a connection to the plc using the url provided as first argument
        try (PlcConnection plcConnection = new PlcDriverManager().getConnection(options.getConnectionString())) {

            // Check if this connection support reading of data.
            if (!plcConnection.getMetadata().canRead()) {
                logger.error("This connection doesn't support reading.");
                return;
            }

            // Create a new read request:
            // - Give the single item requested the alias name "value"
            PlcReadRequest.Builder builder = plcConnection.readRequestBuilder();
            for (int i = 0; i &lt; options.getFieldAddress().length; i++) {
                builder.addItem("value-" + i, options.getFieldAddress()[i]);
            }
            PlcReadRequest readRequest = builder.build();

            //////////////////////////////////////////////////////////
            // Read synchronously ...
            // NOTICE: the ".get()" immediately lets this thread pause until
            // the response is processed and available.
            logger.info("Synchronous request ...");
            PlcReadResponse syncResponse = readRequest.execute().get();
            // Simply iterating over the field names returned in the response.
            printResponse(syncResponse);

            //////////////////////////////////////////////////////////
            // Read asynchronously ...
            // Register a callback executed as soon as a response arrives.
            logger.info("Asynchronous request ...");
            CompletableFuture&lt;? extends PlcReadResponse&gt; asyncResponse = readRequest.execute();
            asyncResponse.whenComplete((readResponse, throwable) -&gt; {
                if (readResponse != null) {
                    printResponse(readResponse);
                } else {
                    logger.error("An error occurred: " + throwable.getMessage(), throwable);
                }
            });
        }
    }

    private static void printResponse(PlcReadResponse response) {
        for (String fieldName : response.getFieldNames()) {
            if(response.getResponseCode(fieldName) == PlcResponseCode.OK) {
                int numValues = response.getNumberOfValues(fieldName);
                // If it's just one element, output just one single line.
                if(numValues == 1) {
                    logger.info("Value[" + fieldName + "]: " + response.getObject(fieldName));
                }
                // If it's more than one element, output each in a single row.
                else {
                    logger.info("Value[" + fieldName + "]:");
                    for(int i = 0; i &lt; numValues; i++) {
                        logger.info(" - " + response.getObject(fieldName, i));
                    }
                }
            }
            // Something went wrong, to output an error message instead.
            else {
                logger.error("Error[" + fieldName + "]: " + response.getResponseCode(fieldName).name());
            }
        }
    }

}</code></pre> 
    </div> 
   </div> 
  </div> 
 </div> 
</div>      </div>
    </div>
  </div> <!-- /row -->
  </div>
    </div> <!-- end : row -->
</div> <!-- /container -->
  <!-- Footer
  ================================================== -->
  <footer class="well">
    <div class="container">
      <div class="row">
            <div class="col-md-3 bottom-nav">

                <ul class="nav nav-list">
                    <li class="nav-header">Reports</li>
                                    <li ><a  href="project-info.html"  title="Project Information" >Project Information <i class="glyphicon glyphicon-chevron-down"></i></a>        <ul class="nav nav-list">
                    <li ><a  href="dependencies.html"  title="Dependencies" >Dependencies</a></li>
                    <li ><a  href="dependency-info.html"  title="Dependency Information" >Dependency Information</a></li>
                    <li ><a  href="dependency-management.html"  title="Dependency Management" >Dependency Management</a></li>
                    <li ><a  href="distribution-management.html"  title="Distribution Management" >Distribution Management</a></li>
                                    <li  class="active" ><a  href="#"  title="About" >About</a></li>
                    <li ><a  href="issue-management.html"  title="Issue Management" >Issue Management</a></li>
                    <li ><a  href="licenses.html"  title="Licenses" >Licenses</a></li>
                    <li ><a  href="mailing-lists.html"  title="Mailing Lists" >Mailing Lists</a></li>
                    <li ><a  href="modules.html"  title="Project Modules" >Project Modules</a></li>
                    <li ><a  href="plugin-management.html"  title="Plugin Management" >Plugin Management</a></li>
                    <li ><a  href="plugins.html"  title="Plugins" >Plugins</a></li>
                    <li ><a  href="scm.html"  title="Source Code Management" >Source Code Management</a></li>
                    <li ><a  href="summary.html"  title="Summary" >Summary</a></li>
        </ul>
</li>
                </ul>

            </div>
            <div class="col-md-3 bottom-nav">

                <ul class="nav nav-list">
                    <li class="nav-header">Apache</li>
                    <li ><a  href="http://www.apache.org"  title="Apache Software Foundation"  class="externalLink" >Apache Software Foundation</a></li>
                    <li ><a  href="https://www.apache.org/foundation/how-it-works.html"  title="How Apache Works"  class="externalLink" >How Apache Works</a></li>
                    <li ><a  href="http://www.apache.org/licenses"  title="License"  class="externalLink" >License</a></li>
                    <li ><a  href="http://www.apache.org/foundation/sponsorship.html"  title="Sponsoring Apache"  class="externalLink" >Sponsoring Apache</a></li>
                    <li ><a  href="http://www.apache.org/foundation/thanks.html"  title="Thanks"  class="externalLink" >Thanks</a></li>
                </ul>

            </div>
            <div class="col-md-3 bottom-nav">

                <ul class="nav nav-list">
                    <li class="nav-header">Modules</li>
                    <li ><a  href="plc4j-api/index.html"  title="PLC4J: API" >PLC4J: API</a></li>
                    <li ><a  href="plc4j-build-utils/index.html"  title="PLC4J: Build Utils" >PLC4J: Build Utils</a></li>
                    <li ><a  href="plc4j-drivers/index.html"  title="PLC4J: Drivers" >PLC4J: Drivers</a></li>
                    <li ><a  href="plc4j-protocols/index.html"  title="PLC4J: Protocols" >PLC4J: Protocols</a></li>
                    <li ><a  href="plc4j-utils/index.html"  title="PLC4J: Utils" >PLC4J: Utils</a></li>
                    <li ><a  href="plc4j-examples/index.html"  title="PLC4J: Examples" >PLC4J: Examples</a></li>
                    <li ><a  href="plc4j-integrations/index.html"  title="PLC4J: Integrations" >PLC4J: Integrations</a></li>
                </ul>

            </div>
            <div class="col-md-3 bottom-nav">

                <ul class="nav nav-list">
                </ul>

            </div>
      </div>
    </div>
  </footer>
  <div class="container subfooter">
    <div class="row">
      <div class="col-md-12">
        <p class="pull-right"><a id="m-scroll-top" href="#">Back to top</a></p>
        <p class="copyright">Copyright &copy;2017-2019                 <a href="https://www.apache.org/">The Apache Software Foundation</a>
. All Rights Reserved.</p>
        <p><a href="https://github.com/devacfr/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://devacfr.github.io" target="_blank" title="devacfr">devacfr</a>.</p>

      </div>
    </div>
  </div>
  <!-- Le javascript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
    <script src="../js/jquery.min.js"></script>
  <script src="../js/bootstrap.min.js"></script>

  <script src="../js/lightbox.min.js"></script>

  <script src="../js/reflow-scroll.js"></script>
	<script src="../js/highlight.min.js"></script>
  <script src="../js/reflow-skin.js"></script>
    <script src="../js/anchor.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function(event) {
            anchors.options = {
              placement: 'left',
            };
            anchors.add('h1,h2, h3, h4, h5, h6');
        });
    </script>

  </body>
</html>